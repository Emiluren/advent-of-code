
fn main() {
    let mut data = INPUT.clone();
    let mut iteration = 0;

    for _ in 0..200_000 {
        do_iteration(&mut data);
        iteration += 1;

        let (mut minx, mut miny) = data[0].0;
        let (mut maxx, mut maxy) = (minx, miny);

        for ((px, py), _) in data.iter() {
            if *px < minx {
                minx = *px;
            } else if *px > maxx {
                maxx = *px;
            }

            if *py < miny {
                miny = *py;
            } else if *py > maxy {
                maxy = *py;
            }
        }

        if maxx - minx < 100 && maxy - miny < 50 {
            println!("Iteration {}", iteration);

            for y in miny ..= maxy {
                for x in minx ..= maxx {
                    print!(
                        "{}",
                        if data.iter().any(|((px, py), _)| *px == x && *py == y) {
                            '#'
                        } else {
                            '.'
                        }
                    );
                }
                println!("");
            }
        }
    }
}

fn do_iteration(data: &mut [((i32, i32), (i32, i32))]) {
    for ((px, py), (vx, vy)) in data.iter_mut() {
        *px += *vx;
        *py += *vy;
    }
}

const INPUT: [((i32, i32), (i32, i32)); 390] = [
    ((-30580, -10081), ( 3,  1)),
    (( 20644, -51044), (-2,  5)),
    ((-51060, -40809), ( 5,  4)),
    (( 10386, -10077), (-1,  1)),
    (( 10387, -40807), (-1,  4)),
    ((-20305, -20315), ( 2,  2)),
    (( 51359,  20655), (-5, -2)),
    (( 30860,  20655), (-3, -2)),
    (( 51386,  51377), (-5, -5)),
    ((-20297,  30900), ( 2, -3)),
    ((-10112, -30558), ( 1,  3)),
    (( 10427,  10414), (-1, -1)),
    ((-51031,  41143), ( 5, -4)),
    ((-10079,  30895), ( 1, -3)),
    (( 30873,  20653), (-3, -2)),
    ((-20315,  51378), ( 2, -5)),
    ((-30590,  51382), ( 3, -5)),
    (( 10422,  30894), (-1, -3)),
    ((-30571, -51048), ( 3,  5)),
    (( 10414,  10411), (-1, -1)),
    ((-30585,  10406), ( 3, -1)),
    ((-30566,  30894), ( 3, -3)),
    (( 41153,  10409), (-4, -1)),
    (( 30868,  10411), (-3, -1)),
    (( 30876, -20315), (-3,  2)),
    (( 41143,  10411), (-4, -1)),
    (( 10379, -10077), (-1,  1)),
    ((-51066, -20320), ( 5,  2)),
    ((-51026,  20657), ( 5, -2)),
    ((-40825, -20319), ( 4,  2)),
    (( 51383, -51044), (-5,  5)),
    (( 30864,  10406), (-3, -1)),
    ((-51028, -20315), ( 5,  2)),
    ((-51058,  20648), ( 5, -2)),
    (( 20636,  41138), (-2, -4)),
    ((-51033, -10081), ( 5,  1)),
    ((-20299, -51053), ( 2,  5)),
    (( 41116, -40808), (-4,  4)),
    (( 41159, -40805), (-4,  4)),
    ((-40824, -30563), ( 4,  3)),
    (( 20625, -20315), (-2,  2)),
    ((-51035,  41143), ( 5, -4)),
    (( 41151,  30896), (-4, -3)),
    ((-10107,  51382), ( 1, -5)),
    ((-10076,  30891), ( 1, -3)),
    (( 20678,  10405), (-2, -1)),
    (( 51402, -20324), (-5,  2)),
    (( 30902,  30894), (-3, -3)),
    ((-51044,  20657), ( 5, -2)),
    ((-10099, -10079), ( 1,  1)),
    (( 41146,  30898), (-4, -3)),
    (( 30892,  51384), (-3, -5)),
    ((-51057,  20653), ( 5, -2)),
    (( 41162,  20652), (-4, -2)),
    ((-10088, -10080), ( 1,  1)),
    (( 10425,  20652), (-1, -2)),
    ((-30564,  30895), ( 3, -3)),
    ((-20329, -40810), ( 2,  4)),
    (( 41119,  30897), (-4, -3)),
    ((-40825, -20317), ( 4,  2)),
    (( 41162,  30895), (-4, -3)),
    ((-40813,  10405), ( 4, -1)),
    ((-30537,  30900), ( 3, -3)),
    ((-20299,  30897), ( 2, -3)),
    (( 20661, -30559), (-2,  3)),
    ((-20339, -20317), ( 2,  2)),
    ((-30558, -51052), ( 3,  5)),
    (( 51349,  51377), (-5, -5)),
    ((-30598, -40807), ( 3,  4)),
    (( 41151,  51377), (-4, -5)),
    ((-40798, -30565), ( 4,  3)),
    ((-51082,  10410), ( 5, -1)),
    ((-51082,  41134), ( 5, -4)),
    ((-30593,  30893), ( 3, -3)),
    ((-10099, -20321), ( 1,  2)),
    ((-51028, -40807), ( 5,  4)),
    ((-40793,  41143), ( 4, -4)),
    ((-10104, -30565), ( 1,  3)),
    (( 51348,  41134), (-5, -4)),
    ((-20318, -40808), ( 2,  4)),
    ((-30550, -30564), ( 3,  3)),
    (( 10406,  20657), (-1, -2)),
    ((-30582,  51386), ( 3, -5)),
    (( 20652,  30891), (-2, -3)),
    (( 51396,  51381), (-5, -5)),
    (( 10382, -30560), (-1,  3)),
    (( 20642, -10072), (-2,  1)),
    (( 51398, -30567), (-5,  3)),
    (( 30873, -51052), (-3,  5)),
    (( 20646, -51048), (-2,  5)),
    (( 10403, -30559), (-1,  3)),
    ((-30593, -30564), ( 3,  3)),
    ((-51044, -40803), ( 5,  4)),
    ((-10078, -30563), ( 1,  3)),
    ((-40840, -40805), ( 4,  4)),
    (( 51375, -30562), (-5,  3)),
    ((-20355, -40806), ( 2,  4)),
    ((-40793, -51053), ( 4,  5)),
    ((-30545,  51386), ( 3, -5)),
    (( 41163,  30900), (-4, -3)),
    (( 51379,  41138), (-5, -4)),
    (( 10392, -51053), (-1,  5)),
    ((-10051,  51386), ( 1, -5)),
    ((-10056,  30894), ( 1, -3)),
    ((-40832, -40806), ( 4,  4)),
    ((-10055,  30900), ( 1, -3)),
    (( 30884,  30895), (-3, -3)),
    ((-20339,  30895), ( 2, -3)),
    ((-40804, -30564), ( 4,  3)),
    ((-51047, -40807), ( 5,  4)),
    ((-51071, -10075), ( 5,  1)),
    (( 10414, -10074), (-1,  1)),
    (( 30892,  10407), (-3, -1)),
    (( 51402, -30565), (-5,  3)),
    ((-40840, -30566), ( 4,  3)),
    (( 10403, -51047), (-1,  5)),
    ((-10093, -30563), ( 1,  3)),
    (( 10390, -20319), (-1,  2)),
    (( 10385,  51381), (-1, -5)),
    (( 41119,  41141), (-4, -4)),
    (( 30868,  41141), (-3, -4)),
    ((-10099, -20320), ( 1,  2)),
    ((-20315,  10408), ( 2, -1)),
    (( 30893, -51049), (-3,  5)),
    ((-10112,  41138), ( 1, -4)),
    ((-20307, -20317), ( 2,  2)),
    ((-51081,  20648), ( 5, -2)),
    ((-40781,  51377), ( 4, -5)),
    (( 41152,  41138), (-4, -4)),
    ((-51036, -40808), ( 5,  4)),
    (( 41130, -20324), (-4,  2)),
    (( 51351, -20319), (-5,  2)),
    (( 41111, -51053), (-4,  5)),
    (( 30860,  10408), (-3, -1)),
    (( 10400, -30567), (-1,  3)),
    ((-20354, -30566), ( 2,  3)),
    ((-30590, -20315), ( 3,  2)),
    ((-51056, -40810), ( 5,  4)),
    ((-30594, -30566), ( 3,  3)),
    (( 20674,  30891), (-2, -3)),
    ((-40801, -20315), ( 4,  2)),
    ((-51055, -10073), ( 5,  1)),
    (( 51359,  51385), (-5, -5)),
    (( 41111,  30894), (-4, -3)),
    ((-51071,  41134), ( 5, -4)),
    ((-51042,  10408), ( 5, -1)),
    (( 10390,  20656), (-1, -2)),
    (( 51351,  41143), (-5, -4)),
    (( 41135, -10073), (-4,  1)),
    (( 20654,  41135), (-2, -4)),
    (( 30880,  20652), (-3, -2)),
    (( 30916, -30558), (-3,  3)),
    (( 10422,  30897), (-1, -3)),
    (( 30901,  20653), (-3, -2)),
    (( 10433, -20315), (-1,  2)),
    (( 30889, -20318), (-3,  2)),
    (( 51378, -20316), (-5,  2)),
    ((-30593,  20657), ( 3, -2)),
    ((-10096, -30558), ( 1,  3)),
    (( 20675,  51386), (-2, -5)),
    ((-10071, -40805), ( 1,  4)),
    (( 51403, -20315), (-5,  2)),
    ((-40824,  30895), ( 4, -3)),
    (( 51406,  41134), (-5, -4)),
    ((-51083, -40809), ( 5,  4)),
    ((-30569, -51048), ( 3,  5)),
    ((-20331, -10076), ( 2,  1)),
    ((-20342, -10079), ( 2,  1)),
    (( 10417, -30560), (-1,  3)),
    (( 41139,  30891), (-4, -3)),
    ((-20342,  41139), ( 2, -4)),
    (( 51383,  30899), (-5, -3)),
    (( 41135, -10081), (-4,  1)),
    ((-20331, -40803), ( 2,  4)),
    (( 51363,  10405), (-5, -1)),
    (( 51398, -40801), (-5,  4)),
    (( 10425, -10072), (-1,  1)),
    (( 41161,  10409), (-4, -1)),
    ((-30590,  41142), ( 3, -4)),
    ((-20339, -10081), ( 2,  1)),
    ((-10112, -40803), ( 1,  4)),
    (( 20638,  10405), (-2, -1)),
    (( 51354, -20321), (-5,  2)),
    (( 20675, -30563), (-2,  3)),
    (( 10374, -51049), (-1,  5)),
    ((-10056,  20655), ( 1, -2)),
    (( 20661, -40809), (-2,  4)),
    (( 41119,  41139), (-4, -4)),
    (( 10377, -40805), (-1,  4)),
    (( 51351,  20651), (-5, -2)),
    ((-40825,  30892), ( 4, -3)),
    ((-10064, -30567), ( 1,  3)),
    ((-30589,  20652), ( 3, -2)),
    ((-51047,  20649), ( 5, -2)),
    ((-40782,  10414), ( 4, -1)),
    ((-10080,  41140), ( 1, -4)),
    (( 51354,  51385), (-5, -5)),
    (( 30902,  10411), (-3, -1)),
    (( 30909, -30567), (-3,  3)),
    (( 20646,  30900), (-2, -3)),
    ((-40793,  20656), ( 4, -2)),
    ((-10084, -20316), ( 1,  2)),
    ((-51082, -40805), ( 5,  4)),
    ((-10064,  10406), ( 1, -1)),
    (( 41155, -30563), (-4,  3)),
    (( 10414,  10406), (-1, -1)),
    ((-10051, -51044), ( 1,  5)),
    (( 41127, -51048), (-4,  5)),
    ((-40809, -51052), ( 4,  5)),
    ((-40836, -10074), ( 4,  1)),
    (( 30864,  41139), (-3, -4)),
    ((-10055,  30891), ( 1, -3)),
    (( 41151, -51044), (-4,  5)),
    ((-20323, -51047), ( 2,  5)),
    (( 30918, -30567), (-3,  3)),
    ((-20323, -51049), ( 2,  5)),
    (( 20636, -40806), (-2,  4)),
    (( 41122, -20324), (-4,  2)),
    (( 10422, -51051), (-1,  5)),
    (( 10402, -40802), (-1,  4)),
    (( 51362, -30567), (-5,  3)),
    ((-40792,  41143), ( 4, -4)),
    (( 51366,  10405), (-5, -1)),
    (( 20666,  41134), (-2, -4)),
    ((-10080,  30898), ( 1, -3)),
    ((-40781, -20324), ( 4,  2)),
    ((-30580, -10081), ( 3,  1)),
    (( 20641, -40803), (-2,  4)),
    (( 10382,  30895), (-1, -3)),
    (( 30902, -20318), (-3,  2)),
    ((-51082, -10076), ( 5,  1)),
    ((-51076,  51382), ( 5, -5)),
    (( 51386, -30567), (-5,  3)),
    (( 30873, -10081), (-3,  1)),
    ((-40825,  10411), ( 4, -1)),
    ((-20354,  51382), ( 2, -5)),
    (( 41152, -30563), (-4,  3)),
    ((-20318,  20657), ( 2, -2)),
    (( 30892,  20652), (-3, -2)),
    (( 30889,  20655), (-3, -2)),
    (( 51346, -20322), (-5,  2)),
    ((-10062, -10081), ( 1,  1)),
    ((-20329,  20657), ( 2, -2)),
    (( 30887,  20657), (-3, -2)),
    (( 30903, -20322), (-3,  2)),
    ((-30571,  30896), ( 3, -3)),
    ((-40839, -40810), ( 4,  4)),
    ((-10075,  10413), ( 1, -1)),
    (( 51386, -30564), (-5,  3)),
    ((-10064, -51044), ( 1,  5)),
    ((-10088,  51382), ( 1, -5)),
    (( 10374,  51382), (-1, -5)),
    (( 51351,  51385), (-5, -5)),
    (( 51350,  41135), (-5, -4)),
    (( 30880,  30891), (-3, -3)),
    ((-30561, -40801), ( 3,  4)),
    ((-20323, -20318), ( 2,  2)),
    ((-40793, -51046), ( 4,  5)),
    ((-40785,  30899), ( 4, -3)),
    (( 51386,  41136), (-5, -4)),
    ((-10103,  30895), ( 1, -3)),
    ((-10104,  51384), ( 1, -5)),
    (( 30892, -30566), (-3,  3)),
    ((-30566, -40810), ( 3,  4)),
    ((-20307,  51384), ( 2, -5)),
    ((-10061, -51049), ( 1,  5)),
    ((-51084, -30562), ( 5,  3)),
    (( 51359,  20655), (-5, -2)),
    ((-51071, -51046), ( 5,  5)),
    ((-10107, -20315), ( 1,  2)),
    ((-51079,  20651), ( 5, -2)),
    ((-30550, -20322), ( 3,  2)),
    (( 30897, -20322), (-3,  2)),
    ((-10062,  51377), ( 1, -5)),
    ((-20319, -20317), ( 2,  2)),
    (( 10403, -30566), (-1,  3)),
    (( 30916, -30563), (-3,  3)),
    ((-40809,  41136), ( 4, -4)),
    ((-51028, -20316), ( 5,  2)),
    ((-10088, -20316), ( 1,  2)),
    ((-20307,  41139), ( 2, -4)),
    (( 51381, -40806), (-5,  4)),
    ((-51034, -10072), ( 5,  1)),
    ((-51043,  41138), ( 5, -4)),
    ((-40817,  20655), ( 4, -2)),
    (( 20673, -30562), (-2,  3)),
    ((-10091, -40810), ( 1,  4)),
    ((-51072,  20652), ( 5, -2)),
    (( 30909,  41143), (-3, -4)),
    (( 20649,  10406), (-2, -1)),
    ((-10080,  30895), ( 1, -3)),
    (( 41151, -30561), (-4,  3)),
    ((-10107, -10076), ( 1,  1)),
    ((-10096, -20322), ( 1,  2)),
    ((-30542,  41138), ( 3, -4)),
    ((-30553, -10072), ( 3,  1)),
    (( 30897, -10080), (-3,  1)),
    (( 20662,  41134), (-2, -4)),
    ((-51074,  20652), ( 5, -2)),
    (( 20667, -10081), (-2,  1)),
    (( 51387, -10077), (-5,  1)),
    (( 41148, -51053), (-4,  5)),
    ((-40841,  41140), ( 4, -4)),
    ((-40784, -10081), ( 4,  1)),
    ((-20347, -40802), ( 2,  4)),
    (( 30900, -10081), (-3,  1)),
    (( 51375,  10413), (-5, -1)),
    ((-51050,  51377), ( 5, -5)),
    ((-51042, -10078), ( 5,  1)),
    ((-30585,  20649), ( 3, -2)),
    ((-51044, -30562), ( 5,  3)),
    ((-30542,  30899), ( 3, -3)),
    ((-30558, -40805), ( 3,  4)),
    ((-51044, -30559), ( 5,  3)),
    (( 41155,  51381), (-4, -5)),
    (( 41155, -10077), (-4,  1)),
    ((-40798,  51384), ( 4, -5)),
    (( 51399, -40810), (-5,  4)),
    ((-10068, -30566), ( 1,  3)),
    (( 10431,  20657), (-1, -2)),
    ((-10088,  20651), ( 1, -2)),
    (( 20676, -20324), (-2,  2)),
    (( 30908,  20656), (-3, -2)),
    ((-51027, -30563), ( 5,  3)),
    ((-40817,  41135), ( 4, -4)),
    (( 30889,  10406), (-3, -1)),
    ((-20310, -30567), ( 2,  3)),
    (( 20630, -30564), (-2,  3)),
    (( 30917, -10077), (-3,  1)),
    ((-10075, -20321), ( 1,  2)),
    ((-51027,  20652), ( 5, -2)),
    ((-51064, -40806), ( 5,  4)),
    (( 51382,  10411), (-5, -1)),
    ((-40813, -20319), ( 4,  2)),
    (( 10387, -20320), (-1,  2)),
    (( 41143,  30895), (-4, -3)),
    (( 30919,  51381), (-3, -5)),
    (( 41151,  10406), (-4, -1)),
    ((-51079,  10411), ( 5, -1)),
    ((-20307, -51045), ( 2,  5)),
    ((-30550, -51049), ( 3,  5)),
    (( 20657,  30893), (-2, -3)),
    ((-40828,  51386), ( 4, -5)),
    (( 20649,  41139), (-2, -4)),
    ((-30542,  30892), ( 3, -3)),
    ((-10053, -51044), ( 1,  5)),
    (( 41121,  30895), (-4, -3)),
    (( 20642, -51053), (-2,  5)),
    (( 30900,  10407), (-3, -1)),
    (( 41111,  41136), (-4, -4)),
    (( 10422,  10408), (-1, -1)),
    (( 51391, -51044), (-5,  5)),
    ((-20352, -51048), ( 2,  5)),
    (( 51367, -20324), (-5,  2)),
    (( 41135,  20657), (-4, -2)),
    (( 41159, -20321), (-4,  2)),
    (( 20652,  51382), (-2, -5)),
    ((-51055, -30558), ( 5,  3)),
    (( 51346,  30894), (-5, -3)),
    ((-30562,  41138), ( 3, -4)),
    ((-51084,  30897), ( 5, -3)),
    ((-20339, -20324), ( 2,  2)),
    (( 51382, -40810), (-5,  4)),
    ((-10112, -51046), ( 1,  5)),
    (( 30884, -10077), (-3,  1)),
    ((-40785,  30891), ( 4, -3)),
    ((-20315,  10412), ( 2, -1)),
    ((-30590,  30892), ( 3, -3)),
    ((-10072,  41143), ( 1, -4)),
    (( 51362,  41137), (-5, -4)),
    ((-10052,  30895), ( 1, -3)),
    (( 10424, -51049), (-1,  5)),
    ((-30574,  10411), ( 3, -1)),
    (( 30878, -40806), (-3,  4)),
    (( 30920,  51386), (-3, -5)),
    ((-30582, -10078), ( 3,  1)),
    (( 51370,  41142), (-5, -4)),
    ((-10099, -30567), ( 1,  3)),
    (( 30916,  41135), (-3, -4)),
    (( 30884, -30565), (-3,  3)),
    (( 10423, -51053), (-1,  5)),
    ((-30572,  30900), ( 3, -3)),
    (( 30893, -51053), (-3,  5)),
    ((-30582,  51383), ( 3, -5)),
    ((-20355, -30559), ( 2,  3)),
    (( 10417, -20322), (-1,  2)),
    (( 10422,  41135), (-1, -4)),
    (( 20630, -10076), (-2,  1)),
    ((-51057, -51053), ( 5,  5)),
    (( 41163,  10414), (-4, -1))
];
